<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Links & Stream Status</title>
<style>
/* General Page Styles */
body {
    font-family: 'Arial', sans-serif;
    background: #1e1e1e;
    color: #f5f5f5;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    transition: background-color 0.3s, color 0.3s;
}

body.light-mode {
    background: #f3f4f6;
    color: #333;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

.table-container {
    display: flex;
    justify-content: space-between;
    width: 90%;
    margin: 0 auto;
}

table {
    width: 48%;
    border-collapse: collapse;
    background: #2e2e2e;
    margin-bottom: 20px;
    border-radius: 8px;
    font-size: 14px;
}

body.light-mode table {
    background: #fff;
}

thead tr {
    background-color: #4285f4;
    color: #fff;
}

th, td {
    padding: 10px;
    text-align: left;
}

tbody tr:nth-child(even) {
    background: #333333;
}

tbody tr:hover {
    background: #444;
    cursor: pointer;
}

body.light-mode tbody tr:nth-child(even) {
    background: #f9f9f9;
}

body.light-mode tbody tr:hover {
    background: #eef;
}

/* Button Styling */
.link-button, #refreshButton, #modeButton {
    background-color: #4285f4;
    color: #fff;
    font-weight: bold;
    padding: 6px 12px;
    border: none;
    border-radius: 20px;
    text-align: center;
    text-decoration: none;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.link-button:hover, #refreshButton:hover, #modeButton:hover {
    background-color: #306dc5;
    transform: scale(1.05);
}

body.light-mode .link-button, body.light-mode #refreshButton, body.light-mode #modeButton {
    background-color: #007AFF;
}

body.light-mode .link-button:hover, body.light-mode #refreshButton:hover, body.light-mode #modeButton:hover {
    background-color: #005BB5;
}

#refreshButton,
#modeButton {
    position: fixed;
    bottom: 20px;
    padding: 10px;
}

#refreshButton {
    left: 30px;
}

#modeButton {
    right: 30px;
}
</style>
</head>

<body>
<h1>Video Links & Stream Status</h1>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Video Link</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="leftTable"></tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Video Link</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="rightTable"></tbody>
    </table>
</div>

<!-- Floating Buttons -->
<button id="refreshButton">Refresh</button>
<button id="modeButton">Light Mode</button>

<script>
    const videoLinksUrl = "video-links.json";
    let videoLinks = [];

    async function fetchVideoLinks() {
        try {
            const response = await fetch(videoLinksUrl);
            if (!response.ok) throw new Error("Failed to fetch video links.");
            const data = await response.json();
            data.sort((a, b) => a.name.localeCompare(b.name)); // Alphabetize by name
            return data;
        } catch (error) {
            console.error("Error fetching video links:", error);
            return [];
        }
    }

    async function populateTables() {
        videoLinks = await fetchVideoLinks();

        const leftTable = document.getElementById("leftTable");
        const rightTable = document.getElementById("rightTable");

        leftTable.innerHTML = "";
        rightTable.innerHTML = "";

        const midIndex = Math.ceil(videoLinks.length / 2);
        const columns = [videoLinks.slice(0, midIndex), videoLinks.slice(midIndex)];

        columns.forEach((group, index) => {
            const table = index === 0 ? leftTable : rightTable;
            let currentLetter = "";

            group.forEach((video) => {
                const videoLetter = video.name[0].toUpperCase();
                if (videoLetter !== currentLetter) {
                    const alphabetRow = document.createElement("tr");
                    const alphabetCell = document.createElement("td");
                    alphabetCell.colSpan = 3;
                    alphabetCell.className = "alphabet-indicator";
                    alphabetCell.textContent = videoLetter;
                    alphabetRow.appendChild(alphabetCell);
                    table.appendChild(alphabetRow);
                    currentLetter = videoLetter;
                }

                const row = document.createElement("tr");

                const nameCell = document.createElement("td");
                nameCell.textContent = video.name;
                row.appendChild(nameCell);

                const linkCell = document.createElement("td");
                const linkButton = document.createElement("a");
                linkButton.href = "#";
                linkButton.textContent = "Watch";
                linkButton.className = "link-button";
                linkButton.onclick = (e) => e.preventDefault(); // Prevent default navigation
                linkCell.appendChild(linkButton);
                row.appendChild(linkCell);

                const statusCell = document.createElement("td");
                statusCell.className = "status checking";
                statusCell.textContent = "Checking...";
                row.appendChild(statusCell);

                table.appendChild(row);

                // Simulate a status check (dummy example)
                setTimeout(() => {
                    statusCell.className = "status online";
                    statusCell.textContent = "Online";
                }, 1000);
            });
        });
    }

    document.getElementById("refreshButton").addEventListener("click", populateTables);
    document.getElementById("modeButton").addEventListener("click", () => {
        document.body.classList.toggle("light-mode");
        document.getElementById("modeButton").textContent =
            document.body.classList.contains("light-mode")
                ? "Dark Mode"
                : "Light Mode";
    });

    // Populate tables on load
    populateTables();
</script>
</body>
</html>
